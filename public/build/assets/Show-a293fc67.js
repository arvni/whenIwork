import{b as W,r as s,u as L,j as x,F as R,a as o,d as w}from"./app-d1dbfdab.js";import{q as V}from"./querystringToObject-f498a4a3.js";import G from"./DayShiftsContainer-bd25b8b8.js";import H from"./ShiftForm-f8f85ddf.js";import{p as n}from"./helper-a68b4be4.js";import{f as J}from"./fetchData-54372226.js";import{D as K}from"./DeleteForm-753e0ea0.js";import{D as M}from"./DateRangePicker-96f94b9b.js";import{A as N}from"./AdminLayout-74b932a6.js";import{S as Q}from"./Stack-fbbf0c4c.js";import{T as X}from"./Typography-b920a7d0.js";import{D as Y}from"./Divider-d7232a9f.js";import{B as Z}from"./Modal-12c03e4b.js";import{C as $}from"./CircularProgress-67ab0f62.js";import"./ShiftRow-9aff4798.js";import"./TableRow-467dcf0c.js";import"./styled-ea4cc06d.js";import"./TableCell-ee779cb9.js";import"./generateUtilityClasses-aacb770c.js";import"./IconButton-776622ad.js";import"./ButtonBase-58f8f612.js";import"./TransitionGroupContext-a7327adb.js";import"./RemoveRedEye-b739abed.js";import"./createSvgIcon-8e57426f.js";import"./Edit-f429e7e8.js";import"./AccordionSummary-963b9755.js";import"./react-is.production.min-a192e302.js";import"./Paper-546bbb26.js";import"./useControlled-f648ed34.js";import"./Collapse-12d8860d.js";import"./useTheme-d80e1e09.js";import"./TableHead-d61057cc.js";import"./Box-70f1a542.js";import"./extendSxProp-026b344c.js";import"./Button-e4ddfc72.js";import"./SelectSearch-844b9bcc.js";import"./TextField-8c801748.js";import"./isMuiElement-4ac4aa11.js";import"./useSlotProps-d015ad01.js";import"./Popper-77f43709.js";import"./createPopper-3cf4315c.js";import"./usePreviousProps-8ac14aea.js";import"./PersianDatepicker-7bc4e7d5.js";import"./DesktopDatePicker-108dc254.js";import"./Grid-52381724.js";import"./DialogActions-0070eb61.js";import"./removeClass-9a525042.js";import"./Switch-3705a5da.js";import"./DialogContent-df303438.js";import"./DialogTitle-fc4060ed.js";import"./jsx-runtime_commonjs-proxy-b142d019.js";import"./AuthenticatedLayout-31b58a96.js";import"./Copyright-41d80426.js";import"./MenuItem-cbf24c2a.js";import"./dividerClasses-5ec07f0b.js";import"./Container-518a9f8d.js";import"./styled-1da70638.js";import"./DialogContentText-bd5c1ce8.js";const tt=()=>{var g;const{room:e,week:m}=W().props,[p,y]=s.useState((g=m.days.find(t=>t.today))==null?void 0:g.date),{data:i,setData:a,post:f,processing:u,errors:C,setError:k,clearErrors:A}=L({room:{id:e.id,name:e.name},date:p,started_at:n(),ended_at:n(8),type:"normal",noUsers:1,related:"",description:""}),[v,S]=s.useState(!1),[F,d]=s.useState(!1),[b,l]=s.useState(!1),[c,E]=s.useState({date:m.date,...V()}),_=t=>w.Inertia.visit(route("admin.rooms.show",e.id),{data:{date:t},only:["week"],preserveState:!0}),B=(t,r)=>{E({[t]:r}),_(r)},I=()=>{f(i.id?route("admin.shifts.update",i.id):route("admin.shifts.store"),{onSuccess:D})},P=t=>()=>{y(t),a(r=>({...r,date:t}))},j=()=>{l(!0)},D=()=>{l(!1),h()},z=t=>r=>{r.preventDefault(),w.Inertia.visit(route("admin.shifts.show",t))},T=t=>()=>{S(!0),J(route("admin.shiftApi.show",t)).then(r=>{a({...r.data,_method:"put"}),l(!0)}).finally(()=>{S(!1)})},q=t=>()=>{a({id:t,_method:"delete"}),d(!0)},O=()=>{d(!1),h()},U=()=>{f(route("admin.shifts.destroy",i.id),{onSuccess:()=>{d(!1),h()}})},h=()=>a({room:{id:e.id,name:e.name},date:p,started_at:n(),ended_at:n(8),type:"normal",noUsers:1,related:"",description:""});return x(R,{children:[x(Q,{width:"100%",direction:"row",justifyContent:"space-evenly",flexWrap:"wrap",spacing:2,children:[o(X,{variant:"h1",fontSize:"xxx-large",children:e.name}),o(M,{weekPicker:!0,onChange:B,value:c==null?void 0:c.date,name:"date"})]}),o(Y,{sx:{marginBottom:"1em"}}),m.days.map(t=>o(G,{onDelete:q,onEdit:T,onShow:z,day:t,expanded:p===t.date,onChange:P,onAddClick:j},t.date)),o(Z,{sx:{color:"#fff",zIndex:t=>t.zIndex.drawer+1},open:v,children:o($,{color:"inherit"})}),o(H,{values:i,open:b,errors:C,setValues:a,loading:u,setError:k,submit:I,cancel:D,clearErrors:A,title:i.id?"بروزرسانی شیفت":"افزودن شیفت"}),o(K,{title:i.date,openDelete:F&&!u,disAgreeCB:O,agreeCB:U})]})},et=[{title:"بخش ها",link:route("admin.rooms.index"),icon:null}];tt.layout=e=>o(N,{auth:e.props.auth,children:e,breadcrumbs:[...et,{title:e.props.room.name,link:null,icon:null}]});export{tt as default};
