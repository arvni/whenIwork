import{u as q,b as v,r as s,j as g,F as B,a as o,H as G}from"./app-def7c5de.js";import{q as H}from"./querystringToObject-023c2f5d.js";import{T as $}from"./TableLayout-961ac895.js";import{D as z}from"./DeleteForm-f9e6f26f.js";import R from"./Filter-582a690f.js";import J from"./AddForm-57760ef5.js";import{A as K}from"./AdminLayout-0e7963ba.js";import{E as Q,D as U}from"./Edit-a11b0b2e.js";import{G as F}from"./GridActionsCellItem-46109fb5.js";import"./jsx-runtime_commonjs-proxy-b4cc2a10.js";import"./createSvgIcon-56adb303.js";import"./styled-92437ef1.js";import"./generateUtilityClasses-5bad0039.js";import"./Paper-d954a2bc.js";import"./isMuiElement-658953cd.js";import"./useId-21b257f9.js";import"./useControlled-1f19e9b0.js";import"./ButtonBase-7267a73f.js";import"./EditCalendar-71b5f8b6.js";import"./Collapse-9c25795f.js";import"./useTheme-3a6ceb9a.js";import"./Copyright-52f1d746.js";import"./TextField-5344552c.js";import"./Popover-8bad161c.js";import"./Modal-0705f4dd.js";import"./Typography-5e5eccde.js";import"./extendSxProp-f48ee653.js";import"./Box-cc504af0.js";import"./IconButton-0f1e2902.js";import"./CircularProgress-a1c2fc53.js";import"./MenuItem-95a4ce65.js";import"./dividerClasses-cc675f31.js";import"./usePreviousProps-f2f2fb2c.js";import"./Divider-fe774888.js";import"./dialogTitleClasses-da8ab0ad.js";import"./DialogTitle-282aa05d.js";import"./DialogContent-7bd6ab15.js";import"./Grid-344be56c.js";import"./DialogActions-1fc43256.js";import"./Stack-c4b38a1c.js";import"./styled-c5d59e91.js";import"./Button-62aefd24.js";import"./Container-d98bec44.js";import"./helper-9f361b88.js";import"./TableHead-3d725891.js";import"./TableRow-9329cfce.js";import"./KeyboardArrowRight-258edeaa.js";import"./Popper-10ee685c.js";import"./createPopper-3cf4315c.js";import"./DialogContentText-cfdfe4c4.js";import"./FilterAlt-3f189fb3.js";import"./AccordionSummary-4c88a9d9.js";const W=()=>{const{post:i,setData:p,data:l,reset:m,processing:d,get:S}=q(),y=[{field:"id",headerName:"ID",type:"number",width:"70",hidden:!0},{field:"name",headerName:"Title",type:"string",width:"200"},{field:"action",headerName:"Action",type:"actions",sortable:!1,getActions:e=>{let t=[o(F,{icon:o(Q,{}),label:"Edit",onClick:M(e.row.id),showInMenu:!0})];return e.row.roles_count<1&&t.push(o(F,{icon:o(U,{}),label:"Delete",showInMenu:!0,onClick:V(e.row)})),t}}],{permissions:N,status:P,errors:C}=v().props,[a,u]=s.useState(null),[x,c]=s.useState(null),[E,f]=s.useState(!1),[I,n]=s.useState(!1),[h,T]=s.useState(!1),[k,w]=s.useState({sort:{field:"id",sort:"asc"},filterModel:{search:""},page:0,pageSize:10});s.useEffect(()=>{m();const e=H();w(t=>({...t,...e}))},[]);const M=e=>async()=>{T(!0);const t=await axios.get(route("permissionApi.show",e));p({...t.data.data,_method:"put"}),n(!0)},V=e=>()=>{u(e),p({_method:"delete"}),f(!0)},j=(e,t,D,b)=>{let r={};e&&(r.page=e),t&&(r.filterModel=t),D&&(r.sort=D),b&&(r.pageSize=b),w(_=>({..._,...r})),S(route("admin.permissions.index",r),{only:["permissions","status"]})},A=()=>{u(null),m(),f(!1)},L=async()=>{i(route("permissions.destroy",a.id),{preserveState:!0,onSuccess:e=>{c(!0),setTimeout(()=>c(null),2e3)}}),A()},O=()=>i(h?route("admin.permissions.update",l.id):route("admin.permissions.store"),{onSuccess:e=>{n(!1),m()}});return g(B,{children:[o(G,{title:"Permissions List"}),g($,{defaultValues:k,success:x,status:P,reload:j,columns:y,data:N,processing:d,Filter:R,addNew:!0,addNewTitle:"Add New Permission",onClickAddNew:()=>{n(!0)},errors:C,children:[o(z,{title:`${a==null?void 0:a.name} Permission`,agreeCB:L,disAgreeCB:A,openDelete:E}),o(J,{title:`${h?"Edit":"Add New"} Permission`,loading:d,open:I,values:l,reset:m,setValues:p,setOpen:n,submit:O})]})]})},X=[{title:"Permissions",link:null,icon:null}];W.layout=i=>o(K,{auth:i.props.auth,children:i,breadcrumbs:X});export{W as default};
