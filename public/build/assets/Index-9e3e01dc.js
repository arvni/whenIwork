import{u as q,b as v,r as s,j as g,F as B,a as o,H as G}from"./app-9ac2a27d.js";import{q as H}from"./querystringToObject-91b1dfb0.js";import{T as $}from"./TableLayout-02f79f3d.js";import{D as z}from"./DeleteForm-83a4ad07.js";import R from"./Filter-422dacd8.js";import J from"./AddForm-7aea1fa5.js";import{A as K}from"./AdminLayout-8f7d6561.js";import{E as Q}from"./Edit-ab5b1f45.js";import{D as U}from"./Delete-a91fef9f.js";import{G as F}from"./GridActionsCellItem-368c646e.js";import"./jsx-runtime_commonjs-proxy-5611237a.js";import"./createSvgIcon-18282e1e.js";import"./styled-f16d3707.js";import"./generateUtilityClasses-3f2b64a1.js";import"./Paper-631201fe.js";import"./isMuiElement-73000179.js";import"./useId-21b8b1a0.js";import"./useControlled-863ae4d3.js";import"./ButtonBase-d98eea35.js";import"./EditCalendar-63f7cc98.js";import"./Collapse-030a1bee.js";import"./useTheme-a40d47d0.js";import"./Copyright-8e533291.js";import"./TextField-e852a59f.js";import"./Popover-306611ff.js";import"./Modal-ab494c8f.js";import"./Typography-8e9e1317.js";import"./extendSxProp-b6a130aa.js";import"./Box-103c0ea1.js";import"./IconButton-f2f79b09.js";import"./CircularProgress-0d57a603.js";import"./MenuItem-ca8e00ef.js";import"./dividerClasses-eeffca2a.js";import"./usePreviousProps-ad903b60.js";import"./Divider-4e31641e.js";import"./dialogTitleClasses-a13ae9f4.js";import"./DialogTitle-7d70dd8f.js";import"./DialogContent-4fc2bf45.js";import"./Grid-e1bdc360.js";import"./DialogActions-411c97a3.js";import"./Stack-ef7e8c0e.js";import"./styled-34ab6540.js";import"./Button-38462903.js";import"./Container-b3c84887.js";import"./helper-9f361b88.js";import"./TableHead-fe233058.js";import"./TableRow-cf08aae6.js";import"./KeyboardArrowRight-629f371a.js";import"./Popper-677ea27b.js";import"./createPopper-3cf4315c.js";import"./DialogContentText-f8958ba4.js";import"./FilterAlt-8230f17d.js";import"./AccordionSummary-9fd969d0.js";const W=()=>{const{post:i,setData:p,data:l,reset:m,processing:d,get:S}=q(),y=[{field:"id",headerName:"ID",type:"number",width:"70",hidden:!0},{field:"name",headerName:"Title",type:"string",width:"200"},{field:"action",headerName:"Action",type:"actions",sortable:!1,getActions:e=>{let t=[o(F,{icon:o(Q,{}),label:"Edit",onClick:M(e.row.id),showInMenu:!0})];return e.row.roles_count<1&&t.push(o(F,{icon:o(U,{}),label:"Delete",showInMenu:!0,onClick:V(e.row)})),t}}],{permissions:N,status:P,errors:C}=v().props,[a,u]=s.useState(null),[x,c]=s.useState(null),[E,f]=s.useState(!1),[I,n]=s.useState(!1),[h,T]=s.useState(!1),[k,w]=s.useState({sort:{field:"id",sort:"asc"},filterModel:{search:""},page:0,pageSize:10});s.useEffect(()=>{m();const e=H();w(t=>({...t,...e}))},[]);const M=e=>async()=>{T(!0);const t=await axios.get(route("permissionApi.show",e));p({...t.data.data,_method:"put"}),n(!0)},V=e=>()=>{u(e),p({_method:"delete"}),f(!0)},j=(e,t,D,b)=>{let r={};e&&(r.page=e),t&&(r.filterModel=t),D&&(r.sort=D),b&&(r.pageSize=b),w(_=>({..._,...r})),S(route("admin.permissions.index",r),{only:["permissions","status"]})},A=()=>{u(null),m(),f(!1)},L=async()=>{i(route("permissions.destroy",a.id),{preserveState:!0,onSuccess:e=>{c(!0),setTimeout(()=>c(null),2e3)}}),A()},O=()=>i(h?route("admin.permissions.update",l.id):route("admin.permissions.store"),{onSuccess:e=>{n(!1),m()}});return g(B,{children:[o(G,{title:"Permissions List"}),g($,{defaultValues:k,success:x,status:P,reload:j,columns:y,data:N,processing:d,Filter:R,addNew:!0,addNewTitle:"Add New Permission",onClickAddNew:()=>{n(!0)},errors:C,children:[o(z,{title:`${a==null?void 0:a.name} Permission`,agreeCB:L,disAgreeCB:A,openDelete:E}),o(J,{title:`${h?"Edit":"Add New"} Permission`,loading:d,open:I,values:l,reset:m,setValues:p,setOpen:n,submit:O})]})]})},X=[{title:"Permissions",link:null,icon:null}];W.layout=i=>o(K,{auth:i.props.auth,children:i,breadcrumbs:X});export{W as default};
