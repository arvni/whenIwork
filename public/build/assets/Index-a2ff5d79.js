import{u as q,b as v,r as s,j as g,F as B,a as o,H as G}from"./app-d1dbfdab.js";import{q as H}from"./querystringToObject-f498a4a3.js";import{T as $}from"./TableLayout-db217659.js";import{D as z}from"./DeleteForm-753e0ea0.js";import R from"./Filter-21e25fc8.js";import J from"./AddForm-4ab47b50.js";import{A as K}from"./AdminLayout-74b932a6.js";import{E as Q,D as U}from"./Edit-f429e7e8.js";import{G as F}from"./GridActionsCellItem-a600e4b7.js";import"./jsx-runtime_commonjs-proxy-b142d019.js";import"./createSvgIcon-8e57426f.js";import"./styled-ea4cc06d.js";import"./generateUtilityClasses-aacb770c.js";import"./useSlotProps-d015ad01.js";import"./TransitionGroupContext-a7327adb.js";import"./isMuiElement-4ac4aa11.js";import"./useControlled-f648ed34.js";import"./ButtonBase-58f8f612.js";import"./AuthenticatedLayout-31b58a96.js";import"./Collapse-12d8860d.js";import"./Paper-546bbb26.js";import"./useTheme-d80e1e09.js";import"./Copyright-41d80426.js";import"./TextField-8c801748.js";import"./react-is.production.min-a192e302.js";import"./Modal-12c03e4b.js";import"./Typography-b920a7d0.js";import"./extendSxProp-026b344c.js";import"./Box-70f1a542.js";import"./IconButton-776622ad.js";import"./CircularProgress-67ab0f62.js";import"./MenuItem-cbf24c2a.js";import"./dividerClasses-5ec07f0b.js";import"./usePreviousProps-8ac14aea.js";import"./Divider-d7232a9f.js";import"./DialogContent-df303438.js";import"./DialogTitle-fc4060ed.js";import"./Grid-52381724.js";import"./DialogActions-0070eb61.js";import"./Stack-fbbf0c4c.js";import"./styled-1da70638.js";import"./Button-e4ddfc72.js";import"./Container-518a9f8d.js";import"./helper-a68b4be4.js";import"./TableHead-d61057cc.js";import"./TableCell-ee779cb9.js";import"./TableRow-467dcf0c.js";import"./KeyboardArrowRight-4fbceae4.js";import"./Popper-77f43709.js";import"./createPopper-3cf4315c.js";import"./DialogContentText-bd5c1ce8.js";import"./FilterAlt-8ce198a1.js";import"./AccordionSummary-963b9755.js";const W=()=>{const{post:i,setData:p,data:l,reset:m,processing:d,get:S}=q(),y=[{field:"id",headerName:"ID",type:"number",width:"70",hidden:!0},{field:"name",headerName:"Title",type:"string",width:"200"},{field:"action",headerName:"Action",type:"actions",sortable:!1,getActions:e=>{let t=[o(F,{icon:o(Q,{}),label:"Edit",onClick:M(e.row.id),showInMenu:!0})];return e.row.roles_count<1&&t.push(o(F,{icon:o(U,{}),label:"Delete",showInMenu:!0,onClick:V(e.row)})),t}}],{permissions:N,status:P,errors:C}=v().props,[a,u]=s.useState(null),[x,c]=s.useState(null),[E,f]=s.useState(!1),[I,n]=s.useState(!1),[h,T]=s.useState(!1),[k,w]=s.useState({sort:{field:"id",sort:"asc"},filterModel:{search:""},page:0,pageSize:10});s.useEffect(()=>{m();const e=H();w(t=>({...t,...e}))},[]);const M=e=>async()=>{T(!0);const t=await axios.get(route("permissionApi.show",e));p({...t.data.data,_method:"put"}),n(!0)},V=e=>()=>{u(e),p({_method:"delete"}),f(!0)},j=(e,t,D,b)=>{let r={};e&&(r.page=e),t&&(r.filterModel=t),D&&(r.sort=D),b&&(r.pageSize=b),w(_=>({..._,...r})),S(route("admin.permissions.index",r),{only:["permissions","status"]})},A=()=>{u(null),m(),f(!1)},L=async()=>{i(route("permissions.destroy",a.id),{preserveState:!0,onSuccess:e=>{c(!0),setTimeout(()=>c(null),2e3)}}),A()},O=()=>i(h?route("admin.permissions.update",l.id):route("admin.permissions.store"),{onSuccess:e=>{n(!1),m()}});return g(B,{children:[o(G,{title:"Permissions List"}),g($,{defaultValues:k,success:x,status:P,reload:j,columns:y,data:N,processing:d,Filter:R,addNew:!0,addNewTitle:"Add New Permission",onClickAddNew:()=>{n(!0)},errors:C,children:[o(z,{title:`${a==null?void 0:a.name} Permission`,agreeCB:L,disAgreeCB:A,openDelete:E}),o(J,{title:`${h?"Edit":"Add New"} Permission`,loading:d,open:I,values:l,reset:m,setValues:p,setOpen:n,submit:O})]})]})},X=[{title:"Permissions",link:null,icon:null}];W.layout=i=>o(K,{auth:i.props.auth,children:i,breadcrumbs:X});export{W as default};
