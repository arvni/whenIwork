import{u as q,b as v,r as s,j as g,F as B,a as o,H as G}from"./app-31845fc9.js";import{q as H}from"./querystringToObject-40551455.js";import{T as $}from"./TableLayout-8fc7ac53.js";import{D as z}from"./DeleteForm-e6091654.js";import R from"./Filter-e2d36d41.js";import J from"./AddForm-1c3941cd.js";import{A as K}from"./AdminLayout-f5325d48.js";import{E as Q,D as U}from"./Edit-f22cb257.js";import{G as F}from"./GridActionsCellItem-823df0d3.js";import"./jsx-runtime_commonjs-proxy-87c57ac6.js";import"./createSvgIcon-967baeee.js";import"./styled-452014fd.js";import"./generateUtilityClasses-246f0c68.js";import"./Paper-13596fd8.js";import"./isMuiElement-d686a30e.js";import"./useId-4eaa092f.js";import"./useControlled-f1fd1053.js";import"./ButtonBase-251486ab.js";import"./EditCalendar-ce4e6383.js";import"./Collapse-1498333f.js";import"./useTheme-83e926c1.js";import"./Copyright-82f3dbfd.js";import"./TextField-c5f8301a.js";import"./Popover-f8f05ac7.js";import"./Modal-dc55508e.js";import"./Typography-09de9fb4.js";import"./extendSxProp-bdf79a15.js";import"./Box-f9329651.js";import"./IconButton-c8b2faca.js";import"./CircularProgress-4c9bf60e.js";import"./MenuItem-e2f390c4.js";import"./dividerClasses-53ccbfb7.js";import"./usePreviousProps-4059d3b5.js";import"./Divider-1d326ae0.js";import"./dialogTitleClasses-0b6ace63.js";import"./DialogTitle-7eaf66ba.js";import"./DialogContent-0d6f9b12.js";import"./Grid-1be5418d.js";import"./DialogActions-db02471f.js";import"./Stack-a8507552.js";import"./styled-b1cc65eb.js";import"./Button-49bbfe71.js";import"./Container-5926e184.js";import"./helper-9f361b88.js";import"./TableHead-15ff716c.js";import"./TableRow-762d7ea3.js";import"./KeyboardArrowRight-a4ab0481.js";import"./Popper-643da6c9.js";import"./createPopper-3cf4315c.js";import"./DialogContentText-fbc6324e.js";import"./FilterAlt-8cfd6068.js";import"./AccordionSummary-51e3c711.js";const W=()=>{const{post:i,setData:p,data:l,reset:m,processing:d,get:S}=q(),y=[{field:"id",headerName:"ID",type:"number",width:"70",hidden:!0},{field:"name",headerName:"Title",type:"string",width:"200"},{field:"action",headerName:"Action",type:"actions",sortable:!1,getActions:e=>{let t=[o(F,{icon:o(Q,{}),label:"Edit",onClick:M(e.row.id),showInMenu:!0})];return e.row.roles_count<1&&t.push(o(F,{icon:o(U,{}),label:"Delete",showInMenu:!0,onClick:V(e.row)})),t}}],{permissions:N,status:P,errors:C}=v().props,[a,u]=s.useState(null),[x,c]=s.useState(null),[E,f]=s.useState(!1),[I,n]=s.useState(!1),[h,T]=s.useState(!1),[k,w]=s.useState({sort:{field:"id",sort:"asc"},filterModel:{search:""},page:0,pageSize:10});s.useEffect(()=>{m();const e=H();w(t=>({...t,...e}))},[]);const M=e=>async()=>{T(!0);const t=await axios.get(route("permissionApi.show",e));p({...t.data.data,_method:"put"}),n(!0)},V=e=>()=>{u(e),p({_method:"delete"}),f(!0)},j=(e,t,D,b)=>{let r={};e&&(r.page=e),t&&(r.filterModel=t),D&&(r.sort=D),b&&(r.pageSize=b),w(_=>({..._,...r})),S(route("admin.permissions.index",r),{only:["permissions","status"]})},A=()=>{u(null),m(),f(!1)},L=async()=>{i(route("permissions.destroy",a.id),{preserveState:!0,onSuccess:e=>{c(!0),setTimeout(()=>c(null),2e3)}}),A()},O=()=>i(h?route("admin.permissions.update",l.id):route("admin.permissions.store"),{onSuccess:e=>{n(!1),m()}});return g(B,{children:[o(G,{title:"Permissions List"}),g($,{defaultValues:k,success:x,status:P,reload:j,columns:y,data:N,processing:d,Filter:R,addNew:!0,addNewTitle:"Add New Permission",onClickAddNew:()=>{n(!0)},errors:C,children:[o(z,{title:`${a==null?void 0:a.name} Permission`,agreeCB:L,disAgreeCB:A,openDelete:E}),o(J,{title:`${h?"Edit":"Add New"} Permission`,loading:d,open:I,values:l,reset:m,setValues:p,setOpen:n,submit:O})]})]})},X=[{title:"Permissions",link:null,icon:null}];W.layout=i=>o(K,{auth:i.props.auth,children:i,breadcrumbs:X});export{W as default};
