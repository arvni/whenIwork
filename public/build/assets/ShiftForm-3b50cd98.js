import{a as i,j as c,F as M}from"./app-def7c5de.js";import{S as u}from"./SelectSearch-626cdd6b.js";import{P}from"./PersianDatepicker-c64eeab1.js";import{s as j}from"./styled-92437ef1.js";import{S as F,F as O}from"./Switch-cc5536af.js";import{S as U}from"./Stack-c4b38a1c.js";import{T as b}from"./Typography-5e5eccde.js";import{b as W}from"./helper-9f361b88.js";import{D as A}from"./dialogTitleClasses-da8ab0ad.js";import{D as I}from"./DialogTitle-282aa05d.js";import{D as B}from"./DialogContent-7bd6ab15.js";import{G as a}from"./Grid-344be56c.js";import{T as p,F as V}from"./TextField-5344552c.js";import{D as G}from"./DialogActions-1fc43256.js";import{B as x}from"./Button-62aefd24.js";import"./createSvgIcon-56adb303.js";import"./generateUtilityClasses-5bad0039.js";import"./IconButton-0f1e2902.js";import"./ButtonBase-7267a73f.js";import"./Paper-d954a2bc.js";import"./Popper-10ee685c.js";import"./Modal-0705f4dd.js";import"./useTheme-3a6ceb9a.js";import"./createPopper-3cf4315c.js";import"./useId-21b257f9.js";import"./useControlled-1f19e9b0.js";import"./usePreviousProps-f2f2fb2c.js";import"./CircularProgress-a1c2fc53.js";import"./DesktopDatePicker-9e03da89.js";import"./Popover-8bad161c.js";import"./removeClass-9a525042.js";import"./styled-c5d59e91.js";import"./extendSxProp-f48ee653.js";import"./isMuiElement-658953cd.js";const L=j(t=>i(F,{focusVisibleClassName:".Mui-focusVisible",disableRipple:!0,...t}))(({theme:t})=>({width:42,height:26,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(16px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:t.palette.mode==="dark"?"#2ECA45":"#65C466",opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:"#33cf4d",border:"6px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]},"&.Mui-disabled + .MuiSwitch-track":{opacity:t.palette.mode==="light"?.7:.3}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:22,height:22},"& .MuiSwitch-track":{borderRadius:26/2,backgroundColor:t.palette.mode==="light"?"#E9E9EA":"#39393D",opacity:1,transition:t.transitions.create(["background-color"],{duration:500})}})),R=({leftLabel:t,rightLabel:m,...r})=>c(U,{direction:"row",spacing:1,alignItems:"center",children:[t&&i(b,{children:t}),i(L,{...r}),m&&i(b,{children:m})]}),Ct=({values:t,setValues:m,cancel:r,submit:y,errors:e,open:w,loading:C,title:f,setError:o,clearErrors:S})=>{var g;const l=n=>h({[n.target.name]:n.target.value}),k=()=>{var d,s;let n=!0;return new Date(new Date(t.date).toDateString())<new Date(new Date().toDateString())&&(o("date","تاریخ انتخابی اشتباه است باشد"),n=!1),t.started_at||(o("started_at","زمان شروع را وارد کنید"),n=!1),t.ended_at||(o("ended_at","زمان پایان را وارد کنید"),n=!1),W(t.started_at,t.ended_at)&&(o("ended_at","زمان پایان شیفت باید بزرگتر از شروع باشد"),n=!1),t.type!=="open"?(t.related===""||!((d=t==null?void 0:t.related)!=null&&d.id))&&(o("related","لطفا یک کاربر را انتخاب کنید"),n=!1):(s=t==null?void 0:t.related)!=null&&s.length||(o("related","لطفا یک نقش را انتخاب کنید"),n=!1),t.noUsers<1&&(o("noUsers","تعداد کاربران باید حداقل یک نفر باشد"),n=!1),n},D=()=>{S(),k()&&y()},_=n=>h({date:n}),T=(n,d)=>h({type:d?"open":"normal",related:d?[]:""}),h=n=>m(d=>({...d,...n}));return c(A,{open:w&&!C,maxWidth:"xs",children:[f&&i(I,{children:f}),i(B,{children:c(a,{container:!0,spacing:3,sx:{marginTop:".5em"},children:[i(a,{item:!0,xs:12,children:i(P,{value:t.date,name:"date",fullWidth:!0,label:"تاریخ",onChange:_,error:e==null?void 0:e.date,helperText:e==null?void 0:e.date})}),i(a,{item:!0,xs:6,children:i(p,{fullWidth:!0,onChange:l,name:"started_at",value:t.started_at,label:"شروع",type:"time",error:e.hasOwnProperty("started_at"),helperText:e==null?void 0:e.started_at,inputProps:{step:3600,pattern:"[0-9]{2}:[0-9]{2}",max:t.ended_at}})}),i(a,{item:!0,xs:6,children:i(p,{name:"ended_at",fullWidth:!0,onChange:l,value:t.ended_at,label:"پایان",type:"time",error:e.hasOwnProperty("ended_at"),helperText:e==null?void 0:e.ended_at,inputProps:{step:3600,pattern:"[0-2][0-9]:[0-5][0-9]",min:t.started_at}})}),i(a,{item:!0,xs:6}),i(a,{item:!0,xs:7.5,sx:{display:"flex",alignItems:"center",alignContent:"center",justifyContent:"start"},children:i(O,{control:i(R,{leftLabel:"معمولی",rightLabel:"باز",checked:t.type==="open",onChange:T}),label:i(V,{children:"نوع شیفت"}),labelPlacement:"top",sx:{alignItems:"center",justifyContent:"space-between",width:"100%",margin:0}})}),((g=t==null?void 0:t.room)==null?void 0:g.id)&&(t.type==="open"?c(M,{children:[i(a,{item:!0,xs:4.5,children:i(p,{name:"noUsers",fullWidth:!0,onChange:l,value:t.noUsers,label:"تعداد کاربران",type:"number",error:e.hasOwnProperty("noUsers"),helperText:e==null?void 0:e.noUsers,inputProps:{min:1}})}),i(a,{item:!0,xs:12,children:i(u,{value:t==null?void 0:t.related,multiple:!0,name:"related",onChange:l,url:route("client.roomsApi.roles",t.room.id),label:"نقش های مرتبط با شیفت",helperText:(e==null?void 0:e.related)??"",error:Object.keys(e).includes("related")})})]}):i(a,{item:!0,xs:12,children:i(u,{value:t==null?void 0:t.related,name:"related",onChange:l,url:route("client.roomsApi.users",t.room.id),label:"کابر",helperText:(e==null?void 0:e.related)??"",error:Object.keys(e).includes("related")})})),i(a,{item:!0,xs:12,children:i(p,{name:"description",fullWidth:!0,onChange:l,value:t.description,label:"توضیحات",multiline:!0,rows:3,error:e.hasOwnProperty("description"),helperText:e==null?void 0:e.description})})]})}),i(G,{children:c(a,{container:!0,spacing:2,flex:!0,justifyContent:"flex-end",justifyItems:"flex-end",children:[i(a,{item:!0,children:i(x,{onClick:r,children:"لغو"})}),i(a,{item:!0,children:i(x,{variant:"contained",onClick:D,sx:{color:"#fff"},children:"ثبت"})})]})})]})};export{Ct as default};
