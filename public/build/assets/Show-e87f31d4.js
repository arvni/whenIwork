import{a as e,r as p,j as x,b as lo,u as co,F as po,d as V}from"./app-31845fc9.js";import{q as mo}from"./querystringToObject-40551455.js";import uo from"./DayShiftsContainer-a614f5cd.js";import fo from"./ShiftForm-df49de95.js";import{p as w}from"./helper-9f361b88.js";import{f as ho}from"./fetchData-54372226.js";import{D as go}from"./DeleteForm-e6091654.js";import{D as Co}from"./DateRangePicker-4bd680ff.js";import{A as vo}from"./AdminLayout-f5325d48.js";import So from"./PublishForm-08371036.js";import{D as Ao}from"./dialogTitleClasses-0b6ace63.js";import{D as xo}from"./DialogTitle-7eaf66ba.js";import{D as Do}from"./DialogContent-0d6f9b12.js";import{D as yo}from"./DialogContentText-fbc6324e.js";import{D as Io}from"./DialogActions-db02471f.js";import{B as q}from"./Button-49bbfe71.js";import{S as bo}from"./Stack-a8507552.js";import{T as ko}from"./Typography-09de9fb4.js";import{g as Po,s as B,c as X,d as Z,l as G,_ as A,u as Mo,a as $o,b as wo,e as Bo}from"./styled-452014fd.js";import{g as zo}from"./generateUtilityClasses-246f0c68.js";import{c as z}from"./createSvgIcon-967baeee.js";import{C as _o}from"./SelectSearch-6e46e2e8.js";import{P as Fo}from"./Paper-13596fd8.js";import{I as Lo}from"./IconButton-c8b2faca.js";import{D as Oo}from"./Divider-1d326ae0.js";import{B as Ro}from"./Modal-dc55508e.js";import{C as Eo}from"./CircularProgress-4c9bf60e.js";import"./ShiftRow-e5fbc523.js";import"./Popover-f8f05ac7.js";import"./useTheme-83e926c1.js";import"./TableRow-762d7ea3.js";import"./RemoveRedEye-f421d368.js";import"./AssignmentTurnedIn-6aeb83eb.js";import"./Edit-f22cb257.js";import"./AccordionSummary-51e3c711.js";import"./useControlled-f1fd1053.js";import"./Collapse-1498333f.js";import"./ButtonBase-251486ab.js";import"./TableHead-15ff716c.js";import"./Box-f9329651.js";import"./extendSxProp-bdf79a15.js";import"./PersianDatepicker-1a58b2b6.js";import"./DesktopDatePicker-68debe68.js";import"./Grid-1be5418d.js";import"./Popper-643da6c9.js";import"./createPopper-3cf4315c.js";import"./TextField-c5f8301a.js";import"./isMuiElement-d686a30e.js";import"./useId-4eaa092f.js";import"./removeClass-9a525042.js";import"./Switch-f8d55f52.js";import"./jsx-runtime_commonjs-proxy-87c57ac6.js";import"./EditCalendar-ce4e6383.js";import"./Copyright-82f3dbfd.js";import"./MenuItem-e2f390c4.js";import"./dividerClasses-53ccbfb7.js";import"./usePreviousProps-4059d3b5.js";import"./Container-5926e184.js";import"./styled-b1cc65eb.js";function Wo(o){return Po("MuiAlert",o)}const To=zo("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),J=To,No=z(e("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),Uo=z(e("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),jo=z(e("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),Ho=z(e("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),Vo=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],qo=o=>{const{variant:r,color:n,severity:a,classes:t}=o,f={root:["root",`${r}${X(n||a)}`,`${r}`],icon:["icon"],message:["message"],action:["action"]};return Bo(f,Wo,t)},Zo=B(Fo,{name:"MuiAlert",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:n}=o;return[r.root,r[n.variant],r[`${n.variant}${X(n.color||n.severity)}`]]}})(({theme:o,ownerState:r})=>{const n=o.palette.mode==="light"?Z:G,a=o.palette.mode==="light"?G:Z,t=r.color||r.severity;return A({},o.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},t&&r.variant==="standard"&&{color:o.vars?o.vars.palette.Alert[`${t}Color`]:n(o.palette[t].light,.6),backgroundColor:o.vars?o.vars.palette.Alert[`${t}StandardBg`]:a(o.palette[t].light,.9),[`& .${J.icon}`]:o.vars?{color:o.vars.palette.Alert[`${t}IconColor`]}:{color:o.palette[t].main}},t&&r.variant==="outlined"&&{color:o.vars?o.vars.palette.Alert[`${t}Color`]:n(o.palette[t].light,.6),border:`1px solid ${(o.vars||o).palette[t].light}`,[`& .${J.icon}`]:o.vars?{color:o.vars.palette.Alert[`${t}IconColor`]}:{color:o.palette[t].main}},t&&r.variant==="filled"&&A({fontWeight:o.typography.fontWeightMedium},o.vars?{color:o.vars.palette.Alert[`${t}FilledColor`],backgroundColor:o.vars.palette.Alert[`${t}FilledBg`]}:{backgroundColor:o.palette.mode==="dark"?o.palette[t].dark:o.palette[t].main,color:o.palette.getContrastText(o.palette[t].main)}))}),Go=B("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(o,r)=>r.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Jo=B("div",{name:"MuiAlert",slot:"Message",overridesResolver:(o,r)=>r.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),K=B("div",{name:"MuiAlert",slot:"Action",overridesResolver:(o,r)=>r.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),Q={success:e(No,{fontSize:"inherit"}),warning:e(Uo,{fontSize:"inherit"}),error:e(jo,{fontSize:"inherit"}),info:e(Ho,{fontSize:"inherit"})},Ko=p.forwardRef(function(r,n){var a,t,f,i,l,m;const h=Mo({props:r,name:"MuiAlert"}),{action:D,children:_,className:F,closeText:b="Close",color:L,components:y={},componentsProps:k={},icon:g,iconMapping:O=Q,onClose:C,role:R="alert",severity:v="success",slotProps:P={},slots:I={},variant:S="standard"}=h,E=$o(h,Vo),c=A({},h,{color:L,severity:v,variant:S}),u=qo(c),W=(a=(t=I.closeButton)!=null?t:y.CloseButton)!=null?a:Lo,T=(f=(i=I.closeIcon)!=null?i:y.CloseIcon)!=null?f:_o,N=(l=P.closeButton)!=null?l:k.closeButton,M=(m=P.closeIcon)!=null?m:k.closeIcon;return x(Zo,A({role:R,elevation:0,ownerState:c,className:wo(u.root,F),ref:n},E,{children:[g!==!1?e(Go,{ownerState:c,className:u.icon,children:g||O[v]||Q[v]}):null,e(Jo,{ownerState:c,className:u.message,children:_}),D!=null?e(K,{ownerState:c,className:u.action,children:D}):null,D==null&&C?e(K,{ownerState:c,className:u.action,children:e(W,A({size:"small","aria-label":b,title:b,color:"inherit",onClick:C},N,{children:e(T,A({fontSize:"small"},M))}))}):null]}))}),Qo=Ko;function Xo({onConfirm:o,onClose:r,open:n,content:a,title:t}){return x(Ao,{open:n,onClose:r,"aria-labelledby":"confirm-form-title","aria-describedby":"confirm-form-description",children:[t&&e(xo,{id:"confirm-form-title",children:t}),a&&e(Do,{children:e(yo,{id:"confirm-form-description",children:a})}),x(Io,{children:[e(q,{onClick:r,children:"خیر"}),e(q,{onClick:o,autoFocus:!0,variant:"contained",children:"بله"})]})]})}const Yo=()=>{var H;const{room:o,week:r,countShifts:n,futureWeek:a}=lo().props,[t,f]=p.useState((H=r.days.find(s=>s.today))==null?void 0:H.date),{data:i,setData:l,post:m,processing:h,errors:D,setError:_,clearErrors:F,reset:b}=co({room:{id:o.id,name:o.name},date:t,started_at:w(),ended_at:w(8),type:"normal",noUsers:1,related:"",description:""}),[L,y]=p.useState(!1),[k,g]=p.useState(!1),[O,C]=p.useState(!1),[R,v]=p.useState(!1),[P,I]=p.useState(!1),[S,E]=p.useState({date:r.date,...mo()}),c=s=>V.Inertia.visit(route("admin.rooms.show",o.id),{data:{date:s},only:["week","countShifts","futureWeek"],preserveState:!0}),u=(s,d)=>{E({[s]:d}),c(d)},W=()=>{m(i.id?route("admin.shifts.update",i.id):route("admin.shifts.store"),{onSuccess:M})},T=s=>()=>{f(s),l(d=>({...d,date:s}))},N=()=>{C(!0)},M=()=>{C(!1),$()},Y=s=>d=>{d.preventDefault(),V.Inertia.visit(route("admin.shifts.show",s))},oo=s=>()=>{l({id:s}),I(!0)},U=()=>{I(!1),b()},to=()=>{m(route("admin.shifts.publish",i.id),{onSuccess:U})},eo=s=>()=>{y(!0),ho(route("admin.shiftApi.show",s)).then(d=>{l({...d.data,_method:"put"}),C(!0)}).finally(()=>{y(!1)})},ro=s=>()=>{l({id:s,_method:"delete"}),g(!0)},so=()=>{g(!1),$()},no=()=>{m(route("admin.shifts.destroy",i.id),{onSuccess:()=>{g(!1),$()}})},$=()=>l({room:{id:o.id,name:o.name},date:t,started_at:w(),ended_at:w(8),type:"normal",noUsers:1,related:"",description:""}),ao=s=>{s.preventDefault(),v(!0),l({room:{id:o.id,name:o.name},date:S.date})},io=()=>{m(route("admin.rooms.shifts_duplicate",i.room.id),{onSuccess:j})},j=()=>{v(!1),$()};return x(po,{children:[x(bo,{width:"100%",direction:"row",justifyContent:"space-evenly",flexWrap:"wrap",spacing:2,children:[e(ko,{variant:"h1",fontSize:"xxx-large",children:o.name}),e(Co,{weekPicker:!0,onChange:u,value:S==null?void 0:S.date,name:"date"})]}),!n&&a&&x(Qo,{children:["برای تکرار شیفت های هفته گذشته ",e("a",{href:"#",onClick:ao,children:"اینجا"})," را کلیک کنید "]}),e(Oo,{sx:{marginBottom:"1em"}}),r.days.map(s=>e(uo,{onDelete:ro,onEdit:eo,onShow:Y,day:s,expanded:t===s.date,onChange:T,onAddClick:N,onPublish:oo},s.date)),e(Ro,{sx:{color:"#fff",zIndex:s=>s.zIndex.drawer+1},open:L,children:e(Eo,{color:"inherit"})}),e(fo,{values:i,open:O,errors:D,setValues:l,loading:h,setError:_,submit:W,cancel:M,clearErrors:F,title:i.id?"بروزرسانی شیفت":"افزودن شیفت"}),e(go,{title:i.date,openDelete:k&&!h,disAgreeCB:so,agreeCB:no}),e(So,{open:P,onAgree:to,onClose:U}),e(Xo,{open:R,onClose:j,onConfirm:io,title:"آیا میخواهید شیفت های این هفته را تکرار کنید ؟"})]})},ot=[{title:"بخش ها",link:route("admin.rooms.index"),icon:null}];Yo.layout=o=>e(vo,{auth:o.props.auth,children:o,breadcrumbs:[...ot,{title:o.props.room.name,link:null,icon:null}]});export{Yo as default};
