import{u as q,b as v,r as s,j as g,F as B,a as o,H as G}from"./app-f429c5d1.js";import{q as H}from"./querystringToObject-6009035e.js";import{T as $}from"./TableLayout-4cb80c1a.js";import{D as z}from"./DeleteForm-7b246af1.js";import R from"./Filter-0a4dc4b4.js";import J from"./AddForm-6ba2b130.js";import{A as K}from"./AdminLayout-761c8cdb.js";import{E as Q}from"./Edit-71d108b1.js";import{D as U}from"./Delete-0f3f6999.js";import{G as F}from"./GridActionsCellItem-28918dc7.js";import"./jsx-runtime_commonjs-proxy-f691489f.js";import"./createSvgIcon-539e1997.js";import"./styled-1ab0f523.js";import"./generateUtilityClasses-4cd05fbe.js";import"./Paper-1ada21ca.js";import"./isMuiElement-e45fcb63.js";import"./useId-802135e4.js";import"./useControlled-1f6928c6.js";import"./ButtonBase-c8dbbad4.js";import"./EditCalendar-314a4c39.js";import"./Collapse-e72a8ee6.js";import"./useTheme-bdf5e9b8.js";import"./Copyright-2691578d.js";import"./TextField-980a54da.js";import"./Popover-e6fdd7be.js";import"./Modal-c33185a4.js";import"./Typography-cd01d11e.js";import"./extendSxProp-cd2562c9.js";import"./Box-b481ad4a.js";import"./IconButton-9ba9fc36.js";import"./CircularProgress-d71a0503.js";import"./MenuItem-1cc40d63.js";import"./dividerClasses-5c2922b8.js";import"./usePreviousProps-e928c92e.js";import"./Divider-5aebe879.js";import"./dialogTitleClasses-a4347e9a.js";import"./DialogTitle-b0e8db21.js";import"./DialogContent-dec291f9.js";import"./Grid-417d5d0a.js";import"./DialogActions-26af375b.js";import"./Stack-33d46199.js";import"./styled-b28ad42f.js";import"./Button-ef7b4777.js";import"./Container-1648660f.js";import"./helper-9f361b88.js";import"./TableHead-f77037e2.js";import"./TableRow-dfec8f3e.js";import"./KeyboardArrowRight-1286ad8c.js";import"./Popper-f24e331f.js";import"./createPopper-3cf4315c.js";import"./DialogContentText-ecd7a405.js";import"./FilterAlt-893696d6.js";import"./AccordionSummary-d37ffc77.js";const W=()=>{const{post:i,setData:p,data:l,reset:m,processing:d,get:S}=q(),y=[{field:"id",headerName:"ID",type:"number",width:"70",hidden:!0},{field:"name",headerName:"Title",type:"string",width:"200"},{field:"action",headerName:"Action",type:"actions",sortable:!1,getActions:e=>{let t=[o(F,{icon:o(Q,{}),label:"Edit",onClick:M(e.row.id),showInMenu:!0})];return e.row.roles_count<1&&t.push(o(F,{icon:o(U,{}),label:"Delete",showInMenu:!0,onClick:V(e.row)})),t}}],{permissions:N,status:P,errors:C}=v().props,[a,u]=s.useState(null),[x,c]=s.useState(null),[E,f]=s.useState(!1),[I,n]=s.useState(!1),[h,T]=s.useState(!1),[k,w]=s.useState({sort:{field:"id",sort:"asc"},filterModel:{search:""},page:0,pageSize:10});s.useEffect(()=>{m();const e=H();w(t=>({...t,...e}))},[]);const M=e=>async()=>{T(!0);const t=await axios.get(route("permissionApi.show",e));p({...t.data.data,_method:"put"}),n(!0)},V=e=>()=>{u(e),p({_method:"delete"}),f(!0)},j=(e,t,D,b)=>{let r={};e&&(r.page=e),t&&(r.filterModel=t),D&&(r.sort=D),b&&(r.pageSize=b),w(_=>({..._,...r})),S(route("admin.permissions.index",r),{only:["permissions","status"]})},A=()=>{u(null),m(),f(!1)},L=async()=>{i(route("permissions.destroy",a.id),{preserveState:!0,onSuccess:e=>{c(!0),setTimeout(()=>c(null),2e3)}}),A()},O=()=>i(h?route("admin.permissions.update",l.id):route("admin.permissions.store"),{onSuccess:e=>{n(!1),m()}});return g(B,{children:[o(G,{title:"Permissions List"}),g($,{defaultValues:k,success:x,status:P,reload:j,columns:y,data:N,processing:d,Filter:R,addNew:!0,addNewTitle:"Add New Permission",onClickAddNew:()=>{n(!0)},errors:C,children:[o(z,{title:`${a==null?void 0:a.name} Permission`,agreeCB:L,disAgreeCB:A,openDelete:E}),o(J,{title:`${h?"Edit":"Add New"} Permission`,loading:d,open:I,values:l,reset:m,setValues:p,setOpen:n,submit:O})]})]})},X=[{title:"Permissions",link:null,icon:null}];W.layout=i=>o(K,{auth:i.props.auth,children:i,breadcrumbs:X});export{W as default};
